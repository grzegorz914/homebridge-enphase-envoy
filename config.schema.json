{
  "pluginAlias": "enphaseEnvoy",
  "pluginType": "platform",
  "singular": true,
  "fixArrays": true,
  "strictValidation": true,
  "headerDisplay": "This plugin works with Enphase Photovoltaic system. Devices are exposed to HomeKit as accessories. Each needs to be added manually.",
  "footerDisplay": "For documentation, please see [GitHub repository](https://github.com/grzegorz914/homebridge-enphase-envoy).",
  "schema": {
    "type": "object",
    "properties": {
      "devices": {
        "title": "Devices",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Accessory name",
              "type": "string",
              "placeholder": "Accessory name",
              "description": "Accessory name to be displayed in Home app",
              "required": true
            },
            "host": {
              "title": "IP/Hostname",
              "type": "string",
              "placeholder": "IP address or hostname",
              "format": "hostname",
              "description": "IP Address or hostname of the Enphase Envoy gateway (defaults to envoy.local). For firmware v7+, please set the IP address.",
              "required": false
            },
            "disableAccessory": {
              "title": "Disable Accessory",
              "type": "boolean",
              "default": false,
              "description": "Disables the accessory.",
              "required": false
            },
            "envoyFirmware7xx": {
              "title": "Modern firmware",
              "type": "boolean",
              "default": false,
              "description": "Enables support for features of firmware v7+",
              "required": true
            },
            "envoyFirmware7xxTokenGenerationMode": {
              "title": "Token Generation Mode",
              "type": "integer",
              "default": 0,
              "oneOf": [
                {
                  "title": "Enlighten credentials",
                  "enum": [
                    0
                  ]
                },
                {
                  "title": "Self-generated token",
                  "enum": [
                    1
                  ]
                }
              ],
              "description": "Method used to obtain token",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true;"
              },
              "required": false
            },
            "envoyPasswd": {
              "title": "Envoy password",
              "type": "string",
              "placeholder": "Envoy password",
              "description": "Envoy password (only if you altered the default password)",
              "format": "password",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === false;"
              },
              "required": false
            },
            "envoyToken": {
              "title": "Envoy token",
              "type": "string",
              "placeholder": "Token",
              "description": "Provide self-generated token (if relevant)",
              "format": "password",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true && model.devices[arrayIndices].envoyFirmware7xxTokenGenerationMode === 1;"
              },
              "required": false
            },
            "envoyTokenInstaller": {
              "title": "Installer",
              "type": "boolean",
              "default": false,
              "description": "Enable for installer-provided token",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true && model.devices[arrayIndices].envoyFirmware7xxTokenGenerationMode === 1;"
              },
              "required": true
            },
            "envoySerialNumber": {
              "title": "Envoy serial number",
              "type": "string",
              "placeholder": "Serial number",
              "description": "Serial number for the Enphase Envoy gateway",
              "format": "password",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true && model.devices[arrayIndices].envoyFirmware7xxTokenGenerationMode === 0;"
              },
              "required": false
            },
            "enlightenUser": {
              "title": "Enlighten username/email address",
              "type": "string",
              "placeholder": "user@example.com",
              "description": "Enphase Enlighten username.",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true && model.devices[arrayIndices].envoyFirmware7xxTokenGenerationMode === 0;"
              },
              "required": false
            },
            "enlightenPasswd": {
              "title": "Enlighten password",
              "type": "string",
              "placeholder": "password",
              "description": "Enlighten password",
              "format": "password",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true && model.devices[arrayIndices].envoyFirmware7xxTokenGenerationMode === 0;"
              },
              "required": false
            },
            "supportPlcLevel": {
              "title": "PLC Level",
              "type": "boolean",
              "default": false,
              "description": "Enables monitoring and control of PLC level (firmware 7+ requires installer credentials)",
              "required": false
            },
            "plcLevelControl": {
              "title": "PLC Level Control",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Accessory name",
                  "description": "Accessory name for Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Switch",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Outlet",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Lightbulb",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use accessory name as a prefix",
                  "required": false
                }
              },
              "required": false
            },
            "supportPowerProductionState": {
              "title": "Power Production",
              "type": "boolean",
              "default": false,
              "description": "Enables monitoring and control of power production (firmware 7+ requires installer credentials)",
              "required": false
            },
            "powerProductionStateControl": {
              "title": "Power Production Control",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Accessory name",
                  "description": "Accessory name",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Switch",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Outlet",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Lightbulb",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type in Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use accessory name as a prefix",
                  "required": false
                }
              }
            },
            "powerProductionSummary": {
              "title": "Power Summary",
              "type": "integer",
              "minimum": 1,
              "default": 1000,
              "description": "Using the Enphase app, provide the total (W) of all microinverters (used to calculate percentage)",
              "required": true
            },
            "powerProductionStateSensor": {
              "title": "Power State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "powerProductionLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "powerLevel": {
                    "title": "Power Level",
                    "type": "integer",
                    "minimum": 0,
                    "description": "Power level in (W) for comparison to sensor that was triggered",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "energyProductionStateSensor": {
              "title": "Energy State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "energyProductionLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "energyLevel": {
                    "title": "Enargy Level",
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Energy level in (Wh) to compare to sensor that was triggered",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "energyProductionLifetimeOffset": {
              "title": "Energy Lifetime Offset",
              "type": "integer",
              "default": 0,
              "description": "Here set offset in (Wh) for energy production (if needed)",
              "required": false
            },
            "powerConsumptionTotalStateSensor": {
              "title": "Power State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "powerConsumptionTotalLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "powerLevel": {
                    "title": "Power Level",
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Power level in (W) for comparison to sensor that was triggered",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "energyConsumptionTotalLifetimeOffset": {
              "title": "Energy Lifetime Offset",
              "type": "integer",
              "default": 0,
              "description": "Offset in (Wh) for energy consumption total (if needed)",
              "required": false
            },
            "energyConsumptionTotalStateSensor": {
              "title": "Energy State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "energyConsumptionTotalLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "energyLevel": {
                    "title": "Enargy Level",
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Energy level in (Wh) to compare to sensor that was triggered",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "powerConsumptionNetStateSensor": {
              "title": "Power State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "powerConsumptionNetLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "powerLevel": {
                    "title": "Power Level",
                    "type": "integer",
                    "default": 0,
                    "description": "Here set power level in (W) to compare at which the sensor fired, negative value (-) mean exporting energy to the grid.",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "energyConsumptionNetLifetimeOffset": {
              "title": "Energy Lifetime Offset",
              "type": "integer",
              "default": 0,
              "description": "Offset in (Wh) for net energy consumption (if needed)",
              "required": false
            },
            "energyConsumptionNetStateSensor": {
              "title": "Energy State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "energyConsumptionNetLevelSensors": {
              "title": "Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "energyLevel": {
                    "title": "Energy Level",
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Here set energy level in (Wh) to compare at which the sensor fired.",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "enchargeProfileControl": {
              "title": "Profile Control",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Accessory name",
                    "description": "Accessory name for Home app",
                    "required": false
                  },
                  "profile": {
                    "title": "Profile",
                    "type": "string",
                    "default": "backup",
                    "oneOf": [
                      {
                        "title": "Savings",
                        "enum": [
                          "savings-mode"
                        ]
                      },
                      {
                        "title": "Economy",
                        "enum": [
                          "economy"
                        ]
                      },
                      {
                        "title": "Full Backup",
                        "enum": [
                          "backup"
                        ]
                      },
                      {
                        "title": "Self Consumption",
                        "enum": [
                          "self-consumption"
                        ]
                      },
                      {
                        "title": "Grid Tied",
                        "enum": [
                          "grid-tied"
                        ]
                      },
                      {
                        "title": "Grid Forming",
                        "enum": [
                          "grid-forming"
                        ]
                      }
                    ],
                    "description": "Here select the profile.",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Lightbulb",
                        "enum": [
                          1
                        ]
                      }
                    ],
                    "description": "Accessory type in Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "enchargeProfileSensors": {
              "title": "Profile Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "profile": {
                    "title": "Profile",
                    "type": "string",
                    "default": "backup",
                    "oneOf": [
                      {
                        "title": "Savings",
                        "enum": [
                          "savings-mode"
                        ]
                      },
                      {
                        "title": "Economy",
                        "enum": [
                          "economy"
                        ]
                      },
                      {
                        "title": "Full Backup",
                        "enum": [
                          "backup"
                        ]
                      },
                      {
                        "title": "Self Consumption",
                        "enum": [
                          "self-consumption"
                        ]
                      },
                      {
                        "title": "Grid Tied",
                        "enum": [
                          "grid-tied"
                        ]
                      },
                      {
                        "title": "Grid Forming",
                        "enum": [
                          "grid-forming"
                        ]
                      }
                    ],
                    "description": "Here select the profile.",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "enchargeStateSensor": {
              "title": "State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "enchargeGridStateSensor": {
              "title": "Grid State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "enchargeGridModeSensors": {
              "title": "Encharge Grid Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "gridMode": {
                    "title": "Mode",
                    "type": "string",
                    "default": "on-grid",
                    "oneOf": [
                      {
                        "title": "Grid On",
                        "enum": [
                          "on-grid"
                        ]
                      },
                      {
                        "title": "Grid Off",
                        "enum": [
                          "off-grid"
                        ]
                      },
                      {
                        "title": "Multimode Grid On",
                        "enum": [
                          "multimode-ongrid"
                        ]
                      },
                      {
                        "title": "Multimode Grid Off",
                        "enum": [
                          "multimode-offgrid"
                        ]
                      },
                      {
                        "title": "Grid Tied",
                        "enum": [
                          "grid-tied"
                        ]
                      },
                      {
                        "title": "Grid Forming",
                        "enum": [
                          "grid-forming"
                        ]
                      }
                    ],
                    "description": "Here select the grid mode.",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              },
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true"
              }
            },
            "enchargeBackupLevelSensors": {
              "title": "Encharge Backup Level Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "compareMode": {
                    "title": "Comparison mode",
                    "type": "integer",
                    "default": 0,
                    "oneOf": [
                      {
                        "title": ">",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": ">=",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "==",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "<",
                        "enum": [
                          3
                        ]
                      },
                      {
                        "title": "<=",
                        "enum": [
                          4
                        ]
                      }
                    ],
                    "description": "Comparison mode",
                    "required": true
                  },
                  "backupLevel": {
                    "title": "Level",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100,
                    "multipleOf": 1,
                    "default": 100,
                    "description": "Backup level in (%) to compare to sensor that was triggered",
                    "required": false
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              },
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true"
              }
            },
            "enpowerGridStateControl": {
              "title": "Grid State Control",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Accessory name",
                  "description": "Accessory name for Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Switch",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Outlet",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Lightbulb",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type in Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use accessory name as a prefix",
                  "required": false
                }
              }
            },
            "enpowerGridStateSensor": {
              "title": "Grid State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "enpowerGridModeSensors": {
              "title": "Enepower Grid Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "gridMode": {
                    "title": "Mode",
                    "type": "string",
                    "default": "on-grid",
                    "oneOf": [
                      {
                        "title": "Grid On",
                        "enum": [
                          "on-grid"
                        ]
                      },
                      {
                        "title": "Grid Off",
                        "enum": [
                          "off-grid"
                        ]
                      },
                      {
                        "title": "Multimode Grid On",
                        "enum": [
                          "multimode-ongrid"
                        ]
                      },
                      {
                        "title": "Multimode Grid Off",
                        "enum": [
                          "multimode-offgrid"
                        ]
                      },
                      {
                        "title": "Grid Tied",
                        "enum": [
                          "grid-tied"
                        ]
                      },
                      {
                        "title": "Grid Forming",
                        "enum": [
                          "grid-forming"
                        ]
                      }
                    ],
                    "description": "Grid mode",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "enpowerDryContactsControl": {
              "title": "Dry Contacts Control",
              "type": "boolean",
              "default": false,
              "description": "Enables control over dry contacts state",
              "required": false
            },
            "enpowerDryContactsSensors": {
              "title": "Dry Contacts Sensors",
              "type": "boolean",
              "default": false,
              "description": "Enables monitoring of dry contacts state",
              "required": false
            },
            "solarGridStateSensor": {
              "title": "Grid State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "solarGridModeSensors": {
              "title": "Solar Grid Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "gridMode": {
                    "title": "Mode",
                    "type": "string",
                    "default": "on-grid",
                    "oneOf": [
                      {
                        "title": "Grid On",
                        "enum": [
                          "on-grid"
                        ]
                      },
                      {
                        "title": "Grid Off",
                        "enum": [
                          "off-grid"
                        ]
                      },
                      {
                        "title": "Multimode Grid On",
                        "enum": [
                          "multimode-ongrid"
                        ]
                      },
                      {
                        "title": "Multimode Grid Off",
                        "enum": [
                          "multimode-offgrid"
                        ]
                      },
                      {
                        "title": "Grid Tied",
                        "enum": [
                          "grid-tied"
                        ]
                      },
                      {
                        "title": "Grid Forming",
                        "enum": [
                          "grid-forming"
                        ]
                      }
                    ],
                    "description": "Grid mode",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              },
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true"
              }
            },
            "generatorStateControl": {
              "title": "State Control",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Accessory name",
                  "description": "Accessory name for Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Switch",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Outlet",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Lightbulb",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type in Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use accessory name as a prefix",
                  "required": false
                }
              }
            },
            "generatorStateSensor": {
              "title": "State Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "generatorModeControl": {
              "title": "Mode Control",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Mode name",
                    "description": "Accessory name for Home app",
                    "required": false
                  },
                  "mode": {
                    "title": "Mode",
                    "type": "string",
                    "default": "off",
                    "oneOf": [
                      {
                        "title": "Off",
                        "enum": [
                          "off"
                        ]
                      },
                      {
                        "title": "On",
                        "enum": [
                          "on"
                        ]
                      },
                      {
                        "title": "Auto",
                        "enum": [
                          "auto"
                        ]
                      }
                    ],
                    "description": "Mode",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Switch",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Outlet",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Lightbulb",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type in Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "generatorModeSensors": {
              "title": "Mode Sensors",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Accessory name",
                    "type": "string",
                    "placeholder": "Sensor name",
                    "description": "Name for the sensor accessory in the Home app",
                    "required": false
                  },
                  "mode": {
                    "title": "Mode",
                    "type": "string",
                    "default": "off",
                    "oneOf": [
                      {
                        "title": "Off",
                        "enum": [
                          "off"
                        ]
                      },
                      {
                        "title": "On",
                        "enum": [
                          "on"
                        ]
                      },
                      {
                        "title": "Auto",
                        "enum": [
                          "auto"
                        ]
                      }
                    ],
                    "description": "Mode",
                    "required": true
                  },
                  "displayType": {
                    "title": "Accessory type",
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 3,
                    "default": 0,
                    "oneOf": [
                      {
                        "title": "None/Disabled",
                        "enum": [
                          0
                        ]
                      },
                      {
                        "title": "Motion Sensor",
                        "enum": [
                          1
                        ]
                      },
                      {
                        "title": "Occupancy Sensor",
                        "enum": [
                          2
                        ]
                      },
                      {
                        "title": "Contact Sensor",
                        "enum": [
                          3
                        ]
                      }
                    ],
                    "description": "Accessory type for Home app",
                    "required": true
                  },
                  "namePrefix": {
                    "title": "Prefix",
                    "type": "boolean",
                    "default": false,
                    "description": "Use the accessory name as a prefix",
                    "required": false
                  }
                }
              }
            },
            "dataRefreshControl": {
              "title": "Data Refresh Control",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Accessory name",
                  "description": "Accessory name for Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Switch",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Outlet",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Lightbulb",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type in Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use accessory name as a prefix",
                  "required": false
                }
              }
            },
            "dataRefreshSensor": {
              "title": "Data Refresh Sensor",
              "type": "object",
              "properties": {
                "name": {
                  "title": "Accessory name",
                  "type": "string",
                  "placeholder": "Sensor name",
                  "description": "Name for the sensor accessory in the Home app",
                  "required": false
                },
                "displayType": {
                  "title": "Accessory type",
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 3,
                  "default": 0,
                  "oneOf": [
                    {
                      "title": "None/Disabled",
                      "enum": [
                        0
                      ]
                    },
                    {
                      "title": "Motion Sensor",
                      "enum": [
                        1
                      ]
                    },
                    {
                      "title": "Occupancy Sensor",
                      "enum": [
                        2
                      ]
                    },
                    {
                      "title": "Contact Sensor",
                      "enum": [
                        3
                      ]
                    }
                  ],
                  "description": "Accessory type for Home app",
                  "required": true
                },
                "namePrefix": {
                  "title": "Prefix",
                  "type": "boolean",
                  "default": false,
                  "description": "Use the accessory name as a prefix",
                  "required": false
                }
              }
            },
            "metersDataRefreshTime": {
              "title": "Meters Refresh Time",
              "type": "number",
              "minimum": 0.5,
              "maximum": 60,
              "multipleOf": 0.5,
              "default": 5,
              "description": "Meters data refresh time (seconds)",
              "required": false
            },
            "productionDataRefreshTime": {
              "title": "Production Refresh Time",
              "type": "number",
              "minimum": 0.5,
              "maximum": 60,
              "multipleOf": 0.5,
              "default": 10,
              "description": "Production data refresh time (seconds)",
              "required": false
            },
            "liveDataRefreshTime": {
              "title": "Live Data Refresh Time",
              "type": "number",
              "minimum": 0.5,
              "maximum": 60,
              "multipleOf": 0.5,
              "default": 5,
              "description": "Live data refresh time (seconds)",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true"
              },
              "required": false
            },
            "ensembleDataRefreshTime": {
              "title": "Ensemble Refresh Time",
              "type": "number",
              "minimum": 0.5,
              "maximum": 60,
              "multipleOf": 0.5,
              "default": 15,
              "description": "Ensemble data refresh time (seconds)",
              "condition": {
                "functionBody": "return model.devices[arrayIndices].envoyFirmware7xx === true"
              },
              "required": false
            },
            "disableLogDeviceInfo": {
              "title": "Disable Log Device Info",
              "type": "boolean",
              "default": false,
              "description": "Disable logging device info for every connected device to the network",
              "required": false
            },
            "disableLogInfo": {
              "title": "Disable Log Info",
              "type": "boolean",
              "default": false,
              "required": false
            },
            "disableLogSuccess": {
              "title": "Disable Log Success",
              "type": "boolean",
              "default": false,
              "required": false
            },
            "disableLogWarn": {
              "title": "Disable Log Warn",
              "type": "boolean",
              "default": false,
              "required": false
            },
            "disableLogError": {
              "title": "Disable Log Error",
              "type": "boolean",
              "default": false,
              "required": false
            },
            "enableDebugMode": {
              "title": "Enable Log Debug",
              "type": "boolean",
              "default": false,
              "required": false
            },
            "restFul": {
              "title": "RESTFul",
              "type": "object",
              "properties": {
                "enable": {
                  "title": "Enable",
                  "type": "boolean",
                  "default": false,
                  "description": "Enable REST service"
                },
                "debug": {
                  "title": "Debug",
                  "type": "boolean",
                  "default": false,
                  "description": "Enable debug mode for REST service",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].restFul.enable === true;"
                  },
                  "required": false
                },
                "port": {
                  "title": "TCP port",
                  "type": "integer",
                  "placeholder": 3000,
                  "description": "TCP listening port for REST service",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].restFul.enable === true;"
                  },
                  "required": false
                }
              }
            },
            "mqtt": {
              "title": "MQTT",
              "type": "object",
              "properties": {
                "enable": {
                  "title": "Enable",
                  "type": "boolean",
                  "default": false,
                  "description": "Enable MQTT broker"
                },
                "debug": {
                  "title": "Debug",
                  "type": "boolean",
                  "default": false,
                  "description": "Enable debug mode for MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true;"
                  },
                  "required": false
                },
                "host": {
                  "title": "IP/hostname",
                  "type": "string",
                  "placeholder": "IP or hostname",
                  "format": "hostname",
                  "description": "IP or hostname of MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true;"
                  },
                  "required": false
                },
                "port": {
                  "title": "TCP port",
                  "type": "integer",
                  "placeholder": 1883,
                  "description": "TCP port forf MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true;"
                  },
                  "required": false
                },
                "clientId": {
                  "title": "Client ID",
                  "type": "string",
                  "placeholder": "Client ID",
                  "description": "Optional Client ID for MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true"
                  },
                  "required": false
                },
                "prefix": {
                  "title": "Prefix",
                  "type": "string",
                  "placeholder": "home/envoy",
                  "description": "Prefix",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true;"
                  },
                  "required": false
                },
                "auth": {
                  "title": "Authorization",
                  "type": "boolean",
                  "default": false,
                  "description": "Enable authorization for MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true;"
                  },
                  "required": false
                },
                "user": {
                  "title": "User",
                  "type": "string",
                  "placeholder": "user",
                  "description": "User for MQTT broker",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true && model.devices[arrayIndices].mqtt.auth === true;"
                  },
                  "required": false
                },
                "passwd": {
                  "title": "Password",
                  "type": "string",
                  "placeholder": "password",
                  "description": "Password for MQTT broker",
                  "format": "password",
                  "condition": {
                    "functionBody": "return model.devices[arrayIndices].mqtt.enable === true && model.devices[arrayIndices].mqtt.auth === true;"
                  },
                  "required": false
                }
              }
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "key": "devices",
      "type": "tabarray",
      "title": "{{ value.name || 'system' }}",
      "items": [
        "devices[].name",
        "devices[].host",
        "devices[].disableAccessory",
        {
          "key": "devices[]",
          "type": "section",
          "title": "Advanced Settings",
          "expandable": true,
          "expanded": false,
          "items": [
            {
              "key": "devices[]",
              "type": "tabarray",
              "title": "{{ value.title }}",
              "items": [
                {
                  "key": "devices[]",
                  "title": "Envoy",
                  "items": [
                    "devices[].envoyFirmware7xx",
                    "devices[].supportPlcLevel",
                    "devices[].supportPowerProductionState",
                    {
                      "key": "devices[]",
                      "type": "section",
                      "title": "Credentials",
                      "description": "Section for setting Enphase Envoy credentials",
                      "expandable": true,
                      "expanded": false,
                      "items": [
                        "devices[].envoyFirmware7xxTokenGenerationMode",
                        {
                          "key": "devices[].envoyPasswd",
                          "type": "password"
                        },
                        {
                          "key": "devices[].envoyToken",
                          "type": "password"
                        },
                        "devices[].envoyTokenInstaller",
                        {
                          "key": "devices[].envoySerialNumber",
                          "type": "password"
                        },
                        "devices[].enlightenUser",
                        {
                          "key": "devices[].enlightenPasswd",
                          "type": "password"
                        }
                      ]
                    },
                    {
                      "key": "devices[].plcLevelControl",
                      "type": "section",
                      "title": "PLC Level Refresh Control",
                      "description": "Section for enabling accessory for PLC level refresh control",
                      "expandable": true,
                      "expanded": false,
                      "items": [
                        "devices[].plcLevelControl.name",
                        "devices[].plcLevelControl.displayType",
                        "devices[].plcLevelControl.namePrefix"
                      ],
                      "condition": {
                        "functionBody": "return model.devices[arrayIndices].supportPlcLevel === true"
                      }
                    },
                    {
                      "key": "devices[].powerProductionStateControl",
                      "type": "section",
                      "title": "Power Production Control",
                      "description": "Section for enabling accessory for power production control",
                      "expandable": true,
                      "expanded": false,
                      "items": [
                        "devices[].powerProductionStateControl.name",
                        "devices[].powerProductionStateControl.displayType",
                        "devices[].powerProductionStateControl.namePrefix"
                      ],
                      "condition": {
                        "functionBody": "return model.devices[arrayIndices].supportPowerProductionState === true"
                      }
                    }
                  ]
                },
                {
                  "key": "devices[]",
                  "title": "Production",
                  "items": [
                    {
                      "key": "devices[]",
                      "type": "tabarray",
                      "title": "{{ value.title }}",
                      "items": [
                        {
                          "key": "devices[]",
                          "title": "Power",
                          "items": [
                            "devices[].powerProductionSummary",
                            {
                              "key": "devices[].powerProductionStateSensor",
                              "type": "section",
                              "title": "Power State Sensor",
                              "description": "Section for enabling sensor for power state monitoring",
                              "expandable": true,
                              "expanded": false,
                              "items": [
                                "devices[].powerProductionStateSensor.name",
                                "devices[].powerProductionStateSensor.displayType",
                                "devices[].powerProductionStateSensor.namePrefix"
                              ]
                            },
                            {
                              "key": "devices[]",
                              "type": "section",
                              "title": "Power Level Sensors",
                              "description": "Section for creating sensors for power level monitoring",
                              "expandable": true,
                              "expanded": false,
                              "items": [
                                {
                                  "key": "devices[].powerProductionLevelSensors",
                                  "type": "tabarray",
                                  "title": "{{ value.name || 'sensor' }}",
                                  "items": [
                                    "devices[].powerProductionLevelSensors[].name",
                                    "devices[].powerProductionLevelSensors[].compareMode",
                                    "devices[].powerProductionLevelSensors[].powerLevel",
                                    "devices[].powerProductionLevelSensors[].displayType",
                                    "devices[].powerProductionLevelSensors[].namePrefix"
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "key": "devices[]",
                          "title": "Energy",
                          "items": [
                            "devices[].energyProductionLifetimeOffset",
                            {
                              "key": "devices[].energyProductionStateSensor",
                              "type": "section",
                              "title": "Energy State Sensor",
                              "description": "Section for enabling sensor for energy state monitoring",
                              "expandable": true,
                              "expanded": false,
                              "items": [
                                "devices[].energyProductionStateSensor.name",
                                "devices[].energyProductionStateSensor.displayType",
                                "devices[].energyProductionStateSensor.namePrefix"
                              ]
                            },
                            {
                              "key": "devices[]",
                              "type": "section",
                              "title": "Energy Level Sensors",
                              "description": "Section for creating sensors for energy level monitoring",
                              "expandable": true,
                              "expanded": false,
                              "items": [
                                {
                                  "key": "devices[].energyProductionLevelSensors",
                                  "type": "tabarray",
                                  "title": "{{ value.name || 'sensor' }}",
                                  "items": [
                                    "devices[].energyProductionLevelSensors[].name",
                                    "devices[].energyProductionLevelSensors[].compareMode",
                                    "devices[].energyProductionLevelSensors[].energyLevel",
                                    "devices[].energyProductionLevelSensors[].displayType",
                                    "devices[].energyProductionLevelSensors[].namePrefix"
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "key": "devices[]",
                  "title": "Consumption",
                  "items": [
                    {
                      "key": "devices[]",
                      "type": "tabarray",
                      "title": "{{ value.title }}",
                      "items": [
                        {
                          "key": "devices[]",
                          "title": "Total",
                          "items": [
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[]",
                                  "title": "Power",
                                  "items": [
                                    {
                                      "key": "devices[].powerConsumptionTotalStateSensor",
                                      "type": "section",
                                      "title": "Power State Sensor",
                                      "description": "Section for enabling sensor for power state monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        "devices[].powerConsumptionTotalStateSensor.name",
                                        "devices[].powerConsumptionTotalStateSensor.displayType",
                                        "devices[].powerConsumptionTotalStateSensor.namePrefix"
                                      ]
                                    },
                                    {
                                      "key": "devices[]",
                                      "type": "section",
                                      "title": "Power Level Sensors",
                                      "description": "Section for creating sensors for power level monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        {
                                          "key": "devices[].powerConsumptionTotalLevelSensors",
                                          "type": "tabarray",
                                          "title": "{{ value.name || 'sensor' }}",
                                          "items": [
                                            "devices[].powerConsumptionTotalLevelSensors[].name",
                                            "devices[].powerConsumptionTotalLevelSensors[].compareMode",
                                            "devices[].powerConsumptionTotalLevelSensors[].powerLevel",
                                            "devices[].powerConsumptionTotalLevelSensors[].displayType",
                                            "devices[].powerConsumptionTotalLevelSensors[].namePrefix"
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "title": "Energy",
                                  "items": [
                                    "devices[].energyConsumptionTotalLifetimeOffset",
                                    {
                                      "key": "devices[].energyConsumptionTotalStateSensor",
                                      "type": "section",
                                      "title": "Energy State Sensor",
                                      "description": "Section for enabling sensor for energy state monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        "devices[].energyConsumptionTotalStateSensor.name",
                                        "devices[].energyConsumptionTotalStateSensor.displayType",
                                        "devices[].energyConsumptionTotalStateSensor.namePrefix"
                                      ]
                                    },
                                    {
                                      "key": "devices[]",
                                      "type": "section",
                                      "title": "Energy Level Sensors",
                                      "description": "Section for creating sensors for energy level monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        {
                                          "key": "devices[].energyConsumptionTotalLevelSensors",
                                          "type": "tabarray",
                                          "title": "{{ value.name || 'sensor' }}",
                                          "items": [
                                            "devices[].energyConsumptionTotalLevelSensors[].name",
                                            "devices[].energyConsumptionTotalLevelSensors[].compareMode",
                                            "devices[].energyConsumptionTotalLevelSensors[].energyLevel",
                                            "devices[].energyConsumptionTotalLevelSensors[].displayType",
                                            "devices[].energyConsumptionTotalLevelSensors[].namePrefix"
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "key": "devices[]",
                          "title": "Net",
                          "items": [
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[]",
                                  "title": "Power",
                                  "items": [
                                    {
                                      "key": "devices[].powerConsumptionNetStateSensor",
                                      "type": "section",
                                      "title": "Power State Sensor",
                                      "description": "Section for enabling sensor for power state monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        "devices[].powerConsumptionNetStateSensor.name",
                                        "devices[].powerConsumptionNetStateSensor.displayType",
                                        "devices[].powerConsumptionNetStateSensor.namePrefix"
                                      ]
                                    },
                                    {
                                      "key": "devices[]",
                                      "type": "section",
                                      "title": "Power Level Sensors",
                                      "description": "Section for creating sensors for power level monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        {
                                          "key": "devices[].powerConsumptionNetLevelSensors",
                                          "type": "tabarray",
                                          "title": "{{ value.name || 'sensor' }}",
                                          "items": [
                                            "devices[].powerConsumptionNetLevelSensors[].name",
                                            "devices[].powerConsumptionNetLevelSensors[].compareMode",
                                            "devices[].powerConsumptionNetLevelSensors[].powerLevel",
                                            "devices[].powerConsumptionNetLevelSensors[].displayType",
                                            "devices[].powerConsumptionNetLevelSensors[].namePrefix"
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "title": "Energy",
                                  "items": [
                                    "devices[].energyConsumptionNetLifetimeOffset",
                                    {
                                      "key": "devices[].energyConsumptionNetStateSensor",
                                      "type": "section",
                                      "title": "Energy State Sensor",
                                      "description": "Section for enabling sensor for energy state monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        "devices[].energyConsumptionNetStateSensor.name",
                                        "devices[].energyConsumptionNetStateSensor.displayType",
                                        "devices[].energyConsumptionNetStateSensor.namePrefix"
                                      ]
                                    },
                                    {
                                      "key": "devices[]",
                                      "type": "section",
                                      "title": "Energy Level Sensors",
                                      "description": "Section for creating sensors for energy level monitoring",
                                      "expandable": true,
                                      "expanded": false,
                                      "items": [
                                        {
                                          "key": "devices[].energyConsumptionNetLevelSensors",
                                          "type": "tabarray",
                                          "title": "{{ value.name || 'sensor' }}",
                                          "items": [
                                            "devices[].energyConsumptionNetLevelSensors[].name",
                                            "devices[].energyConsumptionNetLevelSensors[].compareMode",
                                            "devices[].energyConsumptionNetLevelSensors[].energyLevel",
                                            "devices[].energyConsumptionNetLevelSensors[].displayType",
                                            "devices[].energyConsumptionNetLevelSensors[].namePrefix"
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "key": "devices[]",
                  "title": "Ensemble",
                  "items": [
                    {
                      "key": "devices[]",
                      "type": "tabarray",
                      "title": "{{ value.title }}",
                      "items": [
                        {
                          "key": "devices[]",
                          "title": "Enpower",
                          "items": [
                            "devices[].enpowerDryContactsControl",
                            "devices[].enpowerDryContactsSensors",
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[].enpowerGridStateControl",
                                  "type": "section",
                                  "title": "Grid State Control",
                                  "description": "Section for enabling additional accessory for grid state control",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].enpowerGridStateControl.name",
                                    "devices[].enpowerGridStateControl.displayType",
                                    "devices[].enpowerGridStateControl.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[].enpowerGridStateSensor",
                                  "type": "section",
                                  "title": "Grid State Sensor",
                                  "description": "Section for enabling sensor for grid state monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].enpowerGridStateSensor.name",
                                    "devices[].enpowerGridStateSensor.displayType",
                                    "devices[].enpowerGridStateSensor.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Grid Mode Sensors",
                                  "description": "Section for creating sensors for grid mode monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].enpowerGridModeSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].enpowerGridModeSensors[].name",
                                        "devices[].enpowerGridModeSensors[].gridMode",
                                        "devices[].enpowerGridModeSensors[].displayType",
                                        "devices[].enpowerGridModeSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "key": "devices[]",
                          "title": "Encharge",
                          "items": [
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[].enchargeStateSensor",
                                  "type": "section",
                                  "title": "State Sensor",
                                  "description": "Section for enabling sensor for encharges state monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].enchargeStateSensor.name",
                                    "devices[].enchargeStateSensor.displayType",
                                    "devices[].enchargeStateSensor.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Profile Controls",
                                  "description": "Section for creating encharge profile control",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].enchargeProfileControl",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'control' }}",
                                      "items": [
                                        "devices[].enchargeProfileControl[].name",
                                        "devices[].enchargeProfileControl[].profile",
                                        "devices[].enchargeProfileControl[].displayType",
                                        "devices[].enchargeProfileControl[].namePrefix"
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Profile Sensors",
                                  "description": "Section for creating encharge profile sensors",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].enchargeProfileSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].enchargeProfileSensors[].name",
                                        "devices[].enchargeProfileSensors[].profile",
                                        "devices[].enchargeProfileSensors[].displayType",
                                        "devices[].enchargeProfileSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[].enchargeGridStateSensor",
                                  "type": "section",
                                  "title": "Grid State Sensor",
                                  "description": "Section for enabling sensor for grid state monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].enchargeGridStateSensor.name",
                                    "devices[].enchargeGridStateSensor.displayType",
                                    "devices[].enchargeGridStateSensor.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Grid Mode Sensors",
                                  "description": "Section for enabling sensor for grid mode monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].enchargeGridModeSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].enchargeGridModeSensors[].name",
                                        "devices[].enchargeGridModeSensors[].gridMode",
                                        "devices[].enchargeGridModeSensors[].displayType",
                                        "devices[].enchargeGridModeSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Backup Level Sensors",
                                  "description": "Section for enabling sensor for backup level monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].enchargeBackupLevelSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].enchargeBackupLevelSensors[].name",
                                        "devices[].enchargeBackupLevelSensors[].compareMode",
                                        "devices[].enchargeBackupLevelSensors[].backupLevel",
                                        "devices[].enchargeBackupLevelSensors[].displayType",
                                        "devices[].enchargeBackupLevelSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "key": "devices[]",
                          "title": "Solar",
                          "items": [
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[].solarGridStateSensor",
                                  "type": "section",
                                  "title": "Grid State Sensor",
                                  "description": "Section for enabling sensor for grid state monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].solarGridStateSensor.name",
                                    "devices[].solarGridStateSensor.displayType",
                                    "devices[].solarGridStateSensor.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Grid Mode Sensors",
                                  "description": "Section for enabling sensor for grid mode monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].solarGridModeSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].solarGridModeSensors[].name",
                                        "devices[].solarGridModeSensors[].gridMode",
                                        "devices[].solarGridModeSensors[].displayType",
                                        "devices[].solarGridModeSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "key": "devices[]",
                          "title": "Generator",
                          "items": [
                            {
                              "key": "devices[]",
                              "type": "tabarray",
                              "title": "{{ value.title }}",
                              "items": [
                                {
                                  "key": "devices[].generatorStateControl",
                                  "type": "section",
                                  "title": "State Control",
                                  "description": "Section for enabling additional accessory for state control",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].generatorStateControl.name",
                                    "devices[].generatorStateControl.displayType",
                                    "devices[].generatorStateControl.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[].generatorStateSensor",
                                  "type": "section",
                                  "title": "State Sensor",
                                  "description": "Section for enabling sensor state monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    "devices[].generatorStateSensor.name",
                                    "devices[].generatorStateSensor.displayType",
                                    "devices[].generatorStateSensor.namePrefix"
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Mode Controls",
                                  "description": "Section for creating accessories for generator mode control",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].generatorModeControl",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'control' }}",
                                      "items": [
                                        "devices[].generatorModeControl[].name",
                                        "devices[].generatorModeControl[].mode",
                                        "devices[].generatorModeControl[].displayType",
                                        "devices[].generatorModeControl[].namePrefix"
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "key": "devices[]",
                                  "type": "section",
                                  "title": "Mode Sensors",
                                  "description": "Section for creating sensors mode monitoring",
                                  "expandable": true,
                                  "expanded": false,
                                  "items": [
                                    {
                                      "key": "devices[].generatorModeSensors",
                                      "type": "tabarray",
                                      "title": "{{ value.name || 'sensor' }}",
                                      "items": [
                                        "devices[].generatorModeSensors[].name",
                                        "devices[].generatorModeSensors[].mode",
                                        "devices[].generatorModeSensors[].displayType",
                                        "devices[].generatorModeSensors[].namePrefix"
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "key": "devices[]",
                  "title": "System",
                  "items": [
                    {
                      "key": "devices[]",
                      "type": "tabarray",
                      "title": "{{ value.title }}",
                      "items": [
                        {
                          "key": "devices[]",
                          "type": "section",
                          "title": "Log",
                          "description": "Section for enabling/disable indyvidual log.",
                          "expandable": true,
                          "expanded": false,
                          "items": [
                            "devices[].disableLogDeviceInfo",
                            "devices[].disableLogInfo",
                            "devices[].disableLogSuccess",
                            "devices[].disableLogWarn",
                            "devices[].disableLogError",
                            "devices[].enableDebugMode"
                          ]
                        },
                        {
                          "key": "devices[]",
                          "type": "section",
                          "title": "Data Refresh",
                          "description": "Section for setting individual data refesh time for devices",
                          "expandable": true,
                          "expanded": false,
                          "items": [
                            "devices[].metersDataRefreshTime",
                            "devices[].productionDataRefreshTime",
                            "devices[].liveDataRefreshTime",
                            "devices[].ensembleDataRefreshTime"
                          ]
                        },
                        {
                          "key": "devices[].dataRefreshControl",
                          "type": "section",
                          "title": "Data Refresh Control",
                          "description": "Section for enabling additional accessory for data refresh control",
                          "expandable": true,
                          "expanded": false,
                          "items": [
                            "devices[].dataRefreshControl.name",
                            "devices[].dataRefreshControl.displayType",
                            "devices[].dataRefreshControl.namePrefix"
                          ]
                        },
                        {
                          "key": "devices[].dataRefreshSensor",
                          "type": "section",
                          "title": "Data Refresh Sensor",
                          "description": "Section for enabling sensor for data refresh monitoring",
                          "expandable": true,
                          "expanded": false,
                          "items": [
                            "devices[].dataRefreshSensor.name",
                            "devices[].dataRefreshSensor.displayType",
                            "devices[].dataRefreshSensor.namePrefix"
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "key": "devices[]",
                  "title": "External Integrations",
                  "items": [
                    {
                      "key": "devices[]",
                      "type": "tabarray",
                      "title": "{{ value.title }}",
                      "items": [
                        {
                          "key": "devices[].restFul",
                          "title": "RESTFul",
                          "items": [
                            "devices[].restFul.enable",
                            "devices[].restFul.debug",
                            "devices[].restFul.port"
                          ]
                        },
                        {
                          "key": "devices[].mqtt",
                          "title": "MQTT",
                          "items": [
                            "devices[].mqtt.enable",
                            "devices[].mqtt.debug",
                            "devices[].mqtt.host",
                            "devices[].mqtt.port",
                            "devices[].mqtt.clientId",
                            "devices[].mqtt.prefix",
                            "devices[].mqtt.auth",
                            "devices[].mqtt.user",
                            {
                              "key": "devices[].mqtt.passwd",
                              "type": "password"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "condition": {
            "functionBody": "return model.devices[arrayIndices].disableAccessory === false;"
          }
        }
      ]
    }
  ]
}